/*
* @fileoverview HTML5 QR code scanning library.
* @author mebjas <minhazav@gmail.com>
*
* The word "QR Code" is registered trademark of DENSO WAVE INCORPORATED
* http://www.denso-wave.com/qrcode/faqpatent-e.html
*
* Note: ECMA Script is not supported by all browsers.
*/
'use strict'; var Html5Qrcode = function () { function t(e) { this.verbose = !1, e && (this.verbose = e) } return t.prototype.start = function (t, n, r, i) { var o = this; if (!t) throw "cameraIdOrConfig is required"; if (!n) throw "configuration is required"; if (!r) throw "qrCodeSuccessCallback is required"; var e = this.createVideoConstraints(t); navigator.mediaDevices.getUserMedia({ audio: !1, video: e }).then(function (e) { o.getMediaStream(e).then(function () { o.html5QrCode = new Html5Qrcode(o.verbose), o.html5QrCode.start(t, n, r, i) }).catch(function (e) { throw "Failed to setup reader, error: ".concat(e) }) }).catch(function (e) { throw "Error getting user media, error: ".concat(e) }) }, t.prototype.stop = function () { this.html5QrCode.stop().then(function () { }) }, t.prototype.scanFile = function (e, t) { var n = new Html5Qrcode(this.verbose); return n.scanFile(e, t) }, t.prototype.createVideoConstraints = function (e) { if ("string" == typeof e) return { deviceId: { exact: e } }; if ("object" == typeof e) { var t = Object.keys(e); if (0 === t.length) throw "config object is empty"; var n = ["deviceId", "facingMode", "aspectRatio"]; if (t.forEach(function (e) { -1 === n.indexOf(e) && console.warn("config object has invalid key: ".concat(e)) }), e.aspectRatio) { var r = e.aspectRatio; if ("number" != typeof r) throw "aspectRatio should be a number"; if (r <= 0) throw "aspectRatio should be greater than 0" } return e } throw "Invalid config, should be a string or an object." }, t.prototype.getMediaStream = function (t) { return new Promise(function (e, n) { var r = document.createElement("video"); r.srcObject = t, r.autoplay = !0, r.style.display = "none", r.onloadedmetadata = function () { e() } }) }, t }();